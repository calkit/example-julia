stages:
  _check-env-main:
    cmd: calkit check environment --name main
    deps:
      - Project.toml
    outs:
      - Manifest.toml:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  _check-env-tex:
    cmd: calkit check environment --name tex
    deps: []
    outs:
      - .calkit/env-locks/tex.json:
          cache: false
          persist: true
    always_changed: true
    desc: Automatically generated by Calkit. Changes made here will be
      overwritten.
  run-script:
    cmd: calkit xenv -n main --no-check -- 
      "include(\"scripts/main.jl\")"
    deps:
      - scripts/main.jl
      - Manifest.toml
    outs:
      - figures/circle-flow.png
      - figures/circle-forces.png
    desc: Automatically generated from the 'run-script' stage in 
      calkit.yaml. Changes made here will be overwritten.
  _clean-nb-run-notebook:
    cmd: calkit nb clean "notebooks/main.ipynb"
    deps:
      - notebooks/main.ipynb
    outs:
      - .calkit/notebooks/cleaned/notebooks/main.ipynb:
          cache: false
    desc: Automatically generated from the 'run-notebook' stage in 
      calkit.yaml. Changes made here will be overwritten.
  run-notebook:
    cmd: calkit nb execute --environment main --no-check --language 
      python --to html "notebooks/main.ipynb"
    deps:
      - .calkit/notebooks/cleaned/notebooks/main.ipynb
      - Manifest.toml
    outs:
      - .calkit/notebooks/executed/notebooks/main.ipynb:
          cache: false
      - .calkit/notebooks/html/notebooks/main.html:
          cache: false
    desc: Automatically generated from the 'run-notebook' stage in 
      calkit.yaml. Changes made here will be overwritten.
  build-paper:
    cmd: calkit xenv -n tex --no-check -- latexmk -cd -norc 
      -interaction=nonstopmode -silent -synctex=1 -pdf 
      pubs/conf-paper-1/paper.tex
    deps:
      - pubs/conf-paper-1/paper.tex
      - .calkit/env-locks/tex.json
      - figures/circle-flow.png
      - figures/circle-forces.png
    outs:
      - pubs/conf-paper-1/paper.pdf
    desc: Automatically generated from the 'build-paper' stage in 
      calkit.yaml. Changes made here will be overwritten.

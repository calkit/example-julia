schema: '2.0'
stages:
  _check-env-main:
    cmd: calkit check environment --name main
    deps:
    - path: Project.toml
      hash: md5
      md5: d41e623ffcc9c98b51f5a25361fa912d
      size: 153
    outs:
    - path: Manifest.toml
      hash: md5
      md5: 8a058c34bcadc2cafeed5f0a04d72cc3
      size: 45917
  run-script:
    cmd: calkit xenv -n main --no-check -- "include(\"scripts/main.jl\")"
    deps:
    - path: Manifest.toml
      hash: md5
      md5: 8a058c34bcadc2cafeed5f0a04d72cc3
      size: 45917
    - path: scripts/main.jl
      hash: md5
      md5: f157952fd8fe9bc523d78e27727a4b35
      size: 1098
    outs:
    - path: figures/circle-flow.png
      hash: md5
      md5: 855f98b203cd4cb3ca9d95cb9ba7b451
      size: 48938
    - path: figures/circle-forces.png
      hash: md5
      md5: 34237fe799120c92c6f61ae0a67c1015
      size: 32947
  _check-env-tex:
    cmd: calkit check environment --name tex
    outs:
    - path: .calkit/env-locks/tex.json
      hash: md5
      md5: bb1df3bd963f21fe4bfe580f00891bbe
      size: 1171
  build-paper:
    cmd: calkit xenv -n tex --no-check -- latexmk -cd -norc 
      -interaction=nonstopmode -silent -synctex=1 -pdf 
      pubs/conf-paper-1/paper.tex
    deps:
    - path: .calkit/env-locks/tex.json
      hash: md5
      md5: bb1df3bd963f21fe4bfe580f00891bbe
      size: 1171
    - path: figures/circle-flow.png
      hash: md5
      md5: 855f98b203cd4cb3ca9d95cb9ba7b451
      size: 48938
    - path: figures/circle-forces.png
      hash: md5
      md5: 34237fe799120c92c6f61ae0a67c1015
      size: 32947
    - path: pubs/conf-paper-1/paper.tex
      hash: md5
      md5: 6e6c332a6c73fd0403f9f6569164daad
      size: 634
    outs:
    - path: pubs/conf-paper-1/paper.pdf
      hash: md5
      md5: afbfc3d22022848c57da7bbdafdfe7a8
      size: 115037
  _clean-nb-run-notebook:
    cmd: calkit nb clean "notebooks/main.ipynb"
    deps:
    - path: notebooks/main.ipynb
      hash: md5
      md5: 366802d42602773ba52ca5f691a5201c
      size: 1920
    outs:
    - path: .calkit/notebooks/cleaned/notebooks/main.ipynb
      hash: md5
      md5: 366802d42602773ba52ca5f691a5201c
      size: 1920
  run-notebook:
    cmd: calkit nb execute --environment main --no-check --language python --to 
      html "notebooks/main.ipynb"
    deps:
    - path: .calkit/notebooks/cleaned/notebooks/main.ipynb
      hash: md5
      md5: 366802d42602773ba52ca5f691a5201c
      size: 1920
    - path: Manifest.toml
      hash: md5
      md5: 8a058c34bcadc2cafeed5f0a04d72cc3
      size: 45917
    outs:
    - path: .calkit/notebooks/executed/notebooks/main.ipynb
      hash: md5
      md5: a70c8db32a705a93b48431dd1f49ee23
      size: 476834
    - path: .calkit/notebooks/html/notebooks/main.html
      hash: md5
      md5: 0fe4cdd5a0e52b9dcecfab43a944be70
      size: 388182
